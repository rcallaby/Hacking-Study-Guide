# Bloodhound

## Step 1: Prerequisites

Before we start, ensure you have the following prerequisites:

1. A Windows or Linux machine for running the BloodHound interface.
2. A domain-joined Windows machine for running the SharpHound data collector.
3. Neo4j database installed and configured (BloodHound uses Neo4j for its backend).

## Step 2: Installing Neo4j

1. **Download Neo4j:**
   - Download the Neo4j Community Edition from the [Neo4j website](https://neo4j.com/download/).

2. **Install Neo4j:**
   - Follow the installation instructions provided on the Neo4j download page for your specific operating system.

3. **Start Neo4j:**
   - Once installed, start the Neo4j service. The default URL for accessing the Neo4j browser is `http://localhost:7474`.

4. **Set up authentication:**
   - Access the Neo4j browser at `http://localhost:7474`.
   - Log in with the default username and password (`neo4j` / `neo4j`).
   - Change the default password when prompted.

## Step 3: Installing BloodHound

1. **Download BloodHound:**
   - Go to the BloodHound GitHub repository: [BloodHound GitHub](https://github.com/BloodHoundAD/BloodHound).

2. **Download the latest release:**
   - Navigate to the releases section and download the latest release for your operating system.

3. **Install BloodHound:**
   - Extract the downloaded zip file to a directory of your choice.
   - Open a terminal (or command prompt) and navigate to the extracted directory.
   - Install the necessary dependencies using npm (Node Package Manager). You need to have Node.js and npm installed:
     ```bash
     npm install
     ```

## Step 4: Running BloodHound

1. **Start BloodHound:**
   - From the directory where BloodHound is installed, run:
     ```bash
     npm start
     ```

2. **Connect BloodHound to Neo4j:**
   - Open BloodHound in your browser (usually at `http://localhost:7474`).
   - Log in with your Neo4j credentials.

## Step 5: Collecting Data with SharpHound

1. **Download SharpHound:**
   - SharpHound is the data collector for BloodHound. It can be found in the BloodHound GitHub repository under the `Collectors` directory.

2. **Run SharpHound:**
   - Copy SharpHound to your domain-joined Windows machine.
   - Open a command prompt with administrative privileges.
   - Run SharpHound to collect data. There are several collection methods; the simplest one is:
     ```bash
     SharpHound.exe -c All
     ```

3. **Transfer the data:**
   - SharpHound will generate JSON files containing the collected data. Transfer these files to the machine where BloodHound is running.

## Step 6: Importing Data into BloodHound

1. **Import data:**
   - Open BloodHound and log in if you havenâ€™t already.
   - Click on the "Upload Data" button and select the JSON files generated by SharpHound.
   - BloodHound will process and import the data into the Neo4j database.

## Step 7: Analyzing Data in BloodHound

1. **Navigate the BloodHound interface:**
   - BloodHound has various tabs and views to help you analyze the AD environment.

2. **Querying the database:**
   - Use pre-defined queries or write your custom queries to find specific attack paths and vulnerabilities. Some common queries include:
     - "Find all Domain Admins"
     - "Shortest Path to Domain Admins"
     - "Find all Kerberoastable Users"
     - "Find Shortest Paths to High Value Targets"

3. **Visualize attack paths:**
   - BloodHound provides a graphical representation of attack paths, making it easier to understand complex relationships and dependencies in your AD environment.

4. **Export results:**
   - You can export the query results for further analysis or reporting.

## Step 8: Mitigating Identified Risks

1. **Review identified issues:**
   - Carefully review the identified attack paths and vulnerabilities.

2. **Apply security measures:**
   - Implement appropriate security measures to mitigate the risks. This may include changing permissions, implementing Group Policy changes, patching systems, etc.

3. **Re-run SharpHound:**
   - After making changes, re-run SharpHound to ensure the issues have been resolved and no new vulnerabilities have been introduced.

## Conclusion

BloodHound is a powerful tool for AD security assessment, providing deep insights into potential attack paths and helping security teams to identify and mitigate risks. By following this step-by-step tutorial, you should be able to set up BloodHound, collect data, and analyze your AD environment effectively.

